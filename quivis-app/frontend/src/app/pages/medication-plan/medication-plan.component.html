<div class="grid">
    <div class="col-12">
        <div class="card">
            <h4>Medikationsplan</h4>
            <p-tabView>
                <p-tabPanel header="Dateien">
                    <p-table [value]="uploadedFiles" [scrollable]="true" scrollHeight="300px">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>Dateiname</th>
                                <th>Datum</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-file>
                            <tr>
                                <td>{{ file.name }}</td>
                                <td>{{ file.uploadDate | date: 'dd.MM.yyyy' }}</td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td colspan="2">Keine Dateien gefunden.</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-tabPanel>
                <p-tabPanel header="Upload">
                    <p-fileUpload #fileUploader name="demo[]" url="./upload.php" (onUpload)="onUpload($event)"
                        [customUpload]="true" [multiple]="false" (onSelect)="onUpload($event)"
                        [showUploadButton]="true" [showCancelButton]="false" [auto]="true"
                        styleClass="border-1 surface-border surface-card border-round" chooseLabel="Auswählen">
                        <ng-template pTemplate="content">
                            <div class="h-10rem overflow-y-auto py-3 border-round" style="cursor: copy" (click)="
                                            fileUploader.advancedFileInput.nativeElement.click()">
                                <div *ngIf="!uploadedFile"
                                    class="flex flex-column w-full h-full justify-content-center align-items-center">
                                    <i class="pi pi-file text-2xl text-primary"></i>
                                    <span class="block font-semibold text-900 text-sm mt-3">Datei hinzufügen</span>
                                </div>
                                <div class="flex flex-wrap gap-2 border-round" *ngIf="uploadedFile">
                                    <div class="h-full relative w-5rem h-5rem border-3 border-transparent border-round hover:bg-primary transition-duration-100 cursor-auto"
                                        (mouseenter)="onFileMouseOver()" (mouseleave)="onFileMouseLeave()"
                                        style="padding: 1px">

                                        <i class="pi pi-file text-4xl text-primary"></i>
                                        <span class="block font-semibold text-900 text-sm mt-2">{{ uploadedFile.name }}</span>
                                        <button #buttonEl pButton pRipple type="button" icon="pi pi-times"
                                            class="p-button-rounded p-button-primary text-sm absolute justify-content-center align-items-center cursor-pointer w-1.5rem h-1.5rem"
                                            style="
                                                        top: -8px;
                                                        right: -8px;
                                                        display: none;" (click)="$event.stopPropagation(); removeFile()">
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </p-fileUpload>
                    <div class="flex justify-content-end mt-4">
                        <button pButton pRipple label="Verwerfen" icon="pi pi-times" class="p-button-text" (click)="discardEntry()"></button>
                        <button pButton pRipple label="Speichern" icon="pi pi-check" class="ml-2" (click)="onAddFile()"></button>
                    </div>
                </p-tabPanel>
            </p-tabView>
        </div>
    </div>
</div>